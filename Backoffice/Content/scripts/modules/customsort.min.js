define(["jquery","jquery-ui","app","ajax","toastr","bootstrap"],function(n,t,i,r,u){var f={CustomSort:function(t){var h=t.sortGroup,c=t.sortUrl,v=t.saveUrl,i=t.parentId,l=t.customerid,e=t.axis,o=t.containment,s=t.placeholderClass,f=n('[data-sort-group="'+h+'"]'),y=f.find("[data-sort-node]"),a;i!=""&&i!=undefined&&i!=null&&(f=n('[data-parent-ID="'+i+'"]'),y=f.find("[data-sort-node]"));(s==""||s==undefined||s==null)&&(s=!1);(e==""||e==undefined||e==null)&&(e=!1);(o==""||o==undefined||o==null)&&(o=!1);a={axis:e,containment:o,tolerance:"pointer",revert:"invalid",handle:".sortable-handle",placeholder:s,stop:function(){var o=f.find("[data-sort-node]"),e=h,t;i!=""&&i!=undefined&&i!=null&&(e=i);t=n('[data-sort-target="'+e+'"]');t.addClass("activated");t.off("click").on("click",function(){var f=[],e=1;o.each(function(){var t=n(this).data("sortNode"),i=e++;f.push({nodeID:t,sortIndex:i})});r.json({url:v,contentType:"application/json",data:{customerID:l,groupID:h,parentID:i,sortValues:f},success:function(n){n.success?(u.success("Your changes have been saved."),t.removeClass("activated")):u.error("Your changes could not be saved at this time. Please try again later.")}})})}};f.sortable(a);this.initializeSort=function(){r.json({url:c,data:{groupID:h,customerID:l},success:function(n){var e,i,o,r,t,u;if(n.success){for(e=f.find("[data-sort-node]"),i=[],t=1,o=n.sortedNodes.length;t<=o;t++)i.push(f.find('[data-sort-node="'+n.sortedNodes[t-1].NodeID+'"]'));for(r=i[0],t=0;t<n.sortedNodes.length;t++)t==0?r.insertBefore(e.first()):(u=i[t],u.insertAfter(r),r=u)}},complete:function(){f.find("[data-sort-node]").css("opacity",1)}})};c!=""&&c!=undefined&&c!=null&&this.initializeSort()},init:function(t){t.each(function(){var t=n(this).data(),i=f.CustomSort(t)})}},e=n("[data-sort-group]");return f.init(e),f});