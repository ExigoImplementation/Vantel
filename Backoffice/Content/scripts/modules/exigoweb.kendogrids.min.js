define(["jquery","pubsub","kendo"],function(n,t){function r(n,t){for(var i in t)typeof t[i]=="object"?r(n[i],t[i]):n[i]=t[i]}var i={defaults:{dataSource:{transport:{read:{url:window.location.href,type:"POST",data:function(){return{total:this.total||0,__RequestVerificationToken:n("[name='__RequestVerificationToken']").val()}}}},schema:{data:"data",total:"total"},serverPaging:!0,serverSorting:!0,serverFiltering:!0},height:kendo.support.mobileOS.wp?"24em":630,navigatable:!1,columnMenu:!1,groupable:!1,sortable:!0,reorderable:!0,selectable:!1,resizable:!0,filterable:{extra:!1},pageable:{pageSize:25,pageSizes:[10,25,50],numeric:!0,refresh:!0,input:!1,info:!0,buttonCount:5},pdf:{allPages:!0},dataBound:function(i){var r=i.sender.dataSource,u=i.sender.dataSource.transport.options.read,o=r._filter,s=u.lastfilters||[],f=u.lastfilters=o?o.filters:[],e=!1;r.refresh?(e=!0,r.refresh=!1):(n(s).not(f).length!=0||n(f).not(s).length!=0)&&f.length!=0&&(e=!0);u.total=e?0:r.total();typeof n(document).trigger!="function"&&t.create(document);n(document).trigger("dataBound.kendo.grid",i)}},create:function(t,r){return n(t).kendoGrid(i.options(r))},options:function(t){t=t||{};var u=n.extend(!0,{},t,i.defaults);if(t.url&&(u.dataSource.transport.read.url=t.url),t.sort&&(u.dataSource.sort=t.sort),t.filter&&(u.dataSource.filter=t.filter),t.collapsed)n(document).on("dataBound.kendo.grid",function(t,i){var r=n(i.sender.element);r.find(".k-grouping-row").each(function(){r.data("kendoGrid").collapseGroup(this)})});return r(u,t),u},templates:{level:function(n){return function(t){for(var i="",u=Math.min(10,t[n]),r=u;r>0;r--)i+=".";return i+t[n]}},customer:function(n,t,i,r){var u="#:"+n+"#",r="#:"+r+"#",f=i?"#:"+t+"# #:"+i+"#":"#:"+t+"#",e=['<div class="media clickable" data-profile="modal" data-id="'+u+'" data-token="'+r+'">','<div class="media-left pull-left">','<img class="media-object avatar avatar-sm" style="max-height: 35px;" src="/profiles/avatar/'+u+'" />',"<\/div>",'<div class="media-body">',f+"<br /> ",'<small class="text-muted">ID '+u+"<\/small>","<\/div>","<\/div>"].join("");return kendo.template(e)}}};return i});