define(function(){return{popup:function(n){function t(n,t){var i=t;return typeof n!="undefined"&&(i=n==!0?"yes":"no"),i}var o=n.width||1020,s=n.height||600,r=typeof window.screenX!="undefined"?window.screenX:window.screenLeft,h=typeof window.screenY!="undefined"?window.screenY:window.screenTop,c=typeof window.outerWidth!="undefined"?window.outerWidth:document.documentElement.clientWidth,l=typeof window.outerHeight!="undefined"?window.outerHeight:document.documentElement.clientHeight-22,a=r<0?window.screen.width+r:r,v=parseInt(a+(c-o)/2,10),y=parseInt(h+(l-s)/3,10),i={url:n.url||"",name:n.name||"PopupWindow",specs:["width={0}".format(o),"height={0}".format(s),"top={0}".format(y),"left={0}".format(v),"location={0}".format(t(n.location,"no")),"directories={0}".format(t(n.directories,"no")),"fullscreen={0}".format(t(n.fullscreen,"no")),"menubar={0}".format(t(n.menubar,"no")),"resizable={0}".format(t(n.resizable,"yes")),"scrollbars={0}".format(t(n.scrollbars,"yes")),"status={0}".format(t(n.status,"no")),"toolbar={0}".format(t(n.toolbar,"no")),"copyhistory={0}".format(t(n.copyhistory,"no"))].join(","),replace:n.replace||!0},u,f,e;if(n.query){if(u="",f=i.url.contains("?")?"&":"?",n.query)for(e in n.query)u+="{0}{1}={2}".format(f,e,encodeURIComponent(n.query[e])),f="&";i.url+=u}window.open(i.url,i.name,i.specs,i.replace)}}});